webpackJsonp([13],{"3Bmr":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("3nZU"),i={data:function(){return{isUse:!1,left:"--:--",showEng:!1,showAnimate:!1}},props:{state:Boolean,index:{type:Number,default:0},point:[String,Number],time:{type:[Number,String],default:0},energyId:[Number,String],userPlantId:[Number,String]},watch:{state:function(t,e){this.isUse=t}},methods:{gettime:function(t){var e,n,s;e=Math.floor(t/3600),n=Math.floor(t%3600/60)<10?"0"+Math.floor(t%3600/60):Math.floor(t%3600/60),s=Math.floor(t%3600%60)<10?"0"+Math.floor(t%3600%60):Math.floor(t%3600%60),this.left=e>0?e+"小时":n+":"+s},interval:function(){var t=this,e=this.time,n=1e3;if(0!=e){Math.floor(e/3600)>1&&(n=6e4);try{var s=setInterval(function(){t.isUse?clearInterval(s):e>0?(e--,t.gettime(e)):(t.isUse=!0,clearInterval(s))},n)}catch(t){console.log(t)}finally{setTimeout(function(){t.left="00:00",t.isUse=!0},1e3*this.time+100)}}},disFn:function(){this.$toast.show("还不能收获哦")},getEngFn:function(){var t=this,e=this,n={uid:window.localStorage.getItem("uid"),energyId:this.energyId,userPlantId:this.userPlantId};this.$ajax({url:Object(s.a)(n).harvest,success:function(n){0===n.code?(t.isUse?(t.showAnimate=!1,setTimeout(function(){t.showEng=!1},10)):t.disFn(),t.$emit("callback")):e.$toast.show(n.userMessage||"还不能收取哦")}})}},created:function(){var t=this;this.isUse=this.state;var e=this.index/10*1e3;setTimeout(function(){t.showEng=!0},500+e);setTimeout(function(){t.showAnimate=!0},500+e+1050)},mounted:function(){this.interval()}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("transition",{attrs:{name:"topOffset"}},[t.showEng?n("div",{staticClass:"sun_pane",class:{showAnimate:t.showAnimate},on:{click:t.getEngFn}},[n("img",{style:{opacity:t.isUse?"1":"0.7"},attrs:{src:"//p8jtbvrrf.bkt.clouddn.com/pic_sun.png",alt:""}}),t._v(" "),n("p",[t._v(t._s(t.point))])]):t._e()])],1)},staticRenderFns:[]};var a=n("Z0/y")(i,o,!1,function(t){n("gvWr")},null,null);e.default=a.exports},gvWr:function(t,e){}});